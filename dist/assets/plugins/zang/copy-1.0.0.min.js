"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){var n="Copy";"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t():"function"==typeof define&&define.amd?define([],t()):e[n]=t()}("undefined"!=typeof self?self:void 0,function(){var t={addBtn:"",removeBtn:"",target:"",min:1,max:10,clear:!0,prepend:!1,autoInputIndex:!0,beforeAdd:function(){},afterAdd:function(e){},beforeRemove:function(){},afterRemove:function(){}};function e(e){this.options=Object.assign({},t,e),this.options.addBtn&&this.options.removeBtn&&this.options.target&&this.init()}function r(e){document.querySelectorAll(e.target).forEach(function(e,t){e.querySelectorAll("select,input,textarea").forEach(function(e){e.name=e.name.replace(/\[(\d+)?\]/gi,"["+t+"]")})})}function i(e){var t=e.currentTarget.options;t.beforeAdd();var n,o,i=document.querySelectorAll(t.target);i.length<t.max&&((n=(o=i[t.prepend?0:i.length-1]).insertAdjacentElement(t.prepend?"beforebegin":"afterend",o.cloneNode(!0)))&&(t.clear&&n.querySelectorAll("select,input,textarea").forEach(function(e){switch(e.type){case"checkbox":case"radio":e.checked=!1;break;case"select-one":case"select-multiple":e.selectedIndex=-1,e.firstElementChild.disabled&&e.firstElementChild.hidden&&(e.firstElementChild.selected=!0);break;default:e.value=""}}),"hidden"===(o=n.querySelector(t.removeBtn)).style.visibility&&(o.style.visibility="visible"),o.options=t,o.addEventListener("click",l),i.length+1>=t.max&&(e.currentTarget.style.visibility="hidden"),t.afterAdd(n),t.autoInputIndex&&r(t)))}var l=function(e){var t=e.currentTarget.options;t.beforeRemove();var n=e.currentTarget.closest(t.target);!n||(e=document.querySelectorAll(t.target)).length>t.min&&(n.remove(),(n=document.querySelector(t.addBtn))&&(n.style.visibility=e.length>t.max?"hidden":"visible"),t.afterRemove(),t.autoInputIndex&&r(t))};return e.prototype={init:function(){var e,n=this,t=document.querySelectorAll(this.options.removeBtn),o=this.options.prepend?t.length-1:0;t.forEach(function(e,t){t===o?e.style.visibility="hidden":(e.options=n.options,e.addEventListener("click",l))}),t.length&&((e=document.querySelector(this.options.addBtn))&&(t.length>=this.options.max&&(e.style.visibility="hidden"),e.options=this.options,e.removeHandler=this.removeHandler,e.addEventListener("click",i)),r(this.options))},add:function(){var e=document.querySelector(this.options.addBtn);e&&e.click()},remove:function(){var e,n=this,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;o<1||o>=this.options.max||(e=document.querySelectorAll(this.options.target)).length&&e.length>o&&e.forEach(function(e,t){t!==o||(e=e.querySelector(n.options.removeBtn))&&e.click()})}},e});