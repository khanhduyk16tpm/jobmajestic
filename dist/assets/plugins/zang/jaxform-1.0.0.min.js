"use strict";function _createForOfIteratorHelper(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=_unsupportedIterableToArray(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,s=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return r=t.done,t},e:function(t){s=!0,i=t},f:function(){try{r||null==e.return||e.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(t,n){if(t){if("string"==typeof t)return _arrayLikeToArray(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(t,n):void 0}}function _arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,o=new Array(n);e<n;e++)o[e]=t[e];return o}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,n){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=n():"function"==typeof define&&define.amd?define([],n()):t.JaxForm=n()}("undefined"!=typeof self?self:void 0,function(){var e={container:"",nextBtn:"",loadingIndicator:"",endIndicator:"",maxPerPage:0,prepend:!1,submitOnLoad:!1,xhr:!1,request:function(t,n){}};function t(t,n){this.options=Object.assign({},e,n),this.selector=t,this.selector&&this.init()}return t.prototype={init:function(){this.page=1;var e,o=this;this.forms=document.querySelectorAll(this.selector),this.forms.length&&(e=this.options,this.forms.forEach(function(t,n){t.addEventListener("submit",function(t){t.preventDefault(),o.showLoading(),o.showEnd(!1),n||(o.page=1,e.request(o,o.page))})})),this.container=document.querySelector(this.options.container),this.options.nextBtn&&(this.next=document.querySelectorAll(this.options.nextBtn),this.next.length&&this.next.forEach(function(t){t.addEventListener("click",function(t){o.getNext()})})),this.options.loadingIndicator&&(this.loading=document.querySelector(this.options.loadingIndicator),this.showLoading(!1)),this.options.endIndicator&&(this.end=document.querySelector(this.options.endIndicator),this.showEnd(!1)),this.isEnd="true"===this.formDataset("end"),this.options.submitOnLoad?this.submit():this.isEnd&&(this.showEnd(),this.showNextBtn(!1))},formData:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(this.forms.length){var r=new FormData(this.forms[0]);if(this.options.xhr&&r.append("xhr","1"),this.options.maxPerPage&&r.append("max_per_page",""+this.options.maxPerPage),this.forms.forEach(function(t,n){if(n){var e,o=_createForOfIteratorHelper(new FormData(t).entries());try{for(o.s();!(e=o.n()).done;){var i=e.value;r.append(i[0],i[1])}}catch(t){o.e(t)}finally{o.f()}}}),t){var e={};return r.forEach(function(t,n){e[n]=t}),e}return r}return[]},submit:function(){this.forms.length&&this.forms[0].dispatchEvent(new Event("submit"))},getNext:function(){this.showNextBtn(!1),this.showLoading(),this.options.request(this,++this.page)},addContent:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(void 0===_typeof(this.container)||null===this.container)return!1;if(1===this.page?this.container.innerHTML=t:1<=this.page&&this.container.insertAdjacentHTML(this.options.prepend?"afterbegin":"beforeend",t),n){if(!this.isLastPage(n))return this.showNextBtn(),this.showLoading(!1),!0;this.showEnd()}this.showNextBtn(!1),this.showLoading(!1)},setMaxPerPage:function(t){this.options.maxPerPage=t},maxPage:function(t){return Math.ceil(t/this.options.maxPerPage)},isLastPage:function(t){return this.page>=this.maxPage(t)},showNextBtn:function(){var n=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.next.length&&this.next.forEach(function(t){t.style.display=n?"block":"none"})},showLoading:function(){void 0!==this.loading&&null!==this.loading&&(this.loading.style.display=!(0<arguments.length&&void 0!==arguments[0])||arguments[0]?"block":"none")},showEnd:function(){void 0!==this.end&&null!==this.end&&(this.end.style.display=!(0<arguments.length&&void 0!==arguments[0])||arguments[0]?"block":"none")},formDataset:function(t){if(this.forms.length)for(var n=0;n<this.forms.length;n++)if(this.forms[n].dataset[t])return this.forms[n].dataset[t];return null},formAttribute:function(t){if(this.forms.length)for(var n=0;n<this.forms.length;n++)if(this.forms[n].getAttribute(t))return this.forms[n].getAttribute(t);return null}},t});